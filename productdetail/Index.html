<html>
<title>Dynamic Controls</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="http:////cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" media="screen">
<link rel="stylesheet" type="text/css" href="style.css" />

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script src="http:////cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
<script src="handlebars-v4.0.5.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-url-parser/2.3.1/purl.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Base64/1.0.1/base64.js"></script>
<script type="text/javascript" src="http://virtualmarketingcart.com/bundles/bazingajstranslation/js/translator.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/notify/0.4.2/notify.js"></script>
<style>
    #login-dropdown-list .dropdown-menu {
        min-width: 300px;
        padding: 15px;
    }
</style>

</html>

<body>
    <nav class="">
        <div class="col-md-3">
            <a href="#!" class="brand-logo">closeout promo</a>
        </div>
        <div class="col-md-3">

        </div>
        <div class="col-md-6">
            <div class="collapse navbar-collapse" id="navigationbar">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <div class="nav navbar-nav navbar-right">
                            <li id="login-dropdown-list" class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown" style="color:white" aria-expanded="false" id="userid">kmahera@officebrain.com
			                        <b class="caret"></b>
                                </a>
                                <div class="dropdown-menu">
                                    <button class="btn btn-block btn-info" id="login-buttons-logout" onclick="MyAccount()">My Account</button>
                                    <button class="btn btn-block btn-primary" id="login-buttons-logout" onclick="Logout()">Sign out</button>
                                </div>
                            </li>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="customContainer">

    </div>
    <script id="main" type="text/x-handlebars-template">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">PRODUCT DETAIL</a></li>
                <li class="breadcrumb-item active">{{product.sku}}</li>
            </ol>
            <div class="row">
                {{> productImage}}{{> productInfo}}
            </div>
            <!--<div class="row">
                <div class="col-md-12">
                    <ul id="myTab" class="nav nav-tabs nav_tabs">
                        <li class="active"><a href="#service-one" data-toggle="tab">PRODUCT INFO</a></li>
                        <li><a href="#service-two" data-toggle="tab">DESCRIPTION</a></li>
                        <li><a href="#service-three" data-toggle="tab">FEATURES</a></li>
                    </ul>
                    <div id="myTabContent" class="tab-content">
                        {{> productDetail}}{{> productFeatures}}{{> productDescription}}
                    </div>
                    <hr>
                </div>2
            </div>-->
        </div>
        {{> bidTemplate}}
    </script>

    <script id="productImage" type="text/x-handlebars-template">
        <div class='list-group gallery'>
            <div class='col-md-5'>
                <a class="thumbnail fancybox" rel="ligthbox" href="http://image.promoworld.ca/migration-api-hidden-new/web/images/{{product.default_image}}">
                    <img class="img-responsive" alt="" src="http://image.promoworld.ca/migration-api-hidden-new/web/images/{{product.default_image}}" />
                </a>
            </div>
        </div>
    </script>

    <script id="productInfo" type="text/x-handlebars-template">

        <div class="col-md-7">
            <div style="margin-top:-20px;">
                <div class="btn-group pull-right" role="group" aria-label="...">
                    <button type="button" onclick="gotohome()" class="btn btn-default btn-info"><span class="fa fa-arrow-left"></span>&nbsp;Back to Products</button>
                    <!-- <button type="button" onclick="gotohome()" class="btn btn-default btn-danger"><span class="fa fa-cog fa-fw"></span>&nbsp;Generate Bid</button> -->
                    {{#ifCond product.supplier_info.ownerId userdetail.ownerId}}
                    <button type="button" class="btn btn-default btn-danger" data-toggle="modal" data-target="#myModal"><span class="fa fa-cog fa-fw"></span>&nbsp;Convert To Bid</button> {{/ifCond}}
                </div>
            </div>
            <div class="product-desc text-uppercase"><strong>{{product.product_name}}</strong>
            </div>
            <div class="product-title">ITEM : {{product.sku}}, PRICE: ${{product.price}}</div>
            <div class="product-rating">
                <i class="fa fa-star gold"></i>
                <i class="fa fa-star gold"></i>
                <i class="fa fa-star gold"></i>
                <i class="fa fa-star gold"></i>
                <i class="fa fa-star-o"></i>
            </div>
            <hr>
            <!-- <div>
                <h5>PRICE: ${{product.price}}</h5>
                <hr>
                <h5>DESCRIPTION</h5>
                <hr> {{{product.description}}}-->
            <!--<table class="table table-bordered">
                    <thead>
                        <th>Quantity</th>
                        {{#each product.pricing.decorative}}
                        <th class="text-center">
                            {{#if to}} {{from}}-{{to}} {{else}} {{from}}+ {{/if}}
                        </th>
                        {{/each}}2
                    </thead>
                    <tbody>
                        <tr>
                            <td>Price</td>
                            {{#each product.pricing.decorative}}
                            <td class="text-center">{{rate}}</td>
                            {{/each}}
                        </tr>a
                    </tbody>
                </table>
            </div>-->
            <div>

                <ul id="myTab" class="nav nav-tabs nav_tabs">
                    <li class="active"><a href="#service-one" data-toggle="tab">PRODUCT INFO</a></li>
                    <li><a href="#service-two" data-toggle="tab">DESCRIPTION</a></li>
                    <!--<li><a href="#service-three" data-toggle="tab">FEATURES</a></li>-->
                </ul>
                <div id="myTabContent" class="tab-content">
                    {{> productDetail}}{{> productFeatures}}{{> productDescription}}
                </div>

            </div>
            <div style="margin-top:10px;">
                <div class="btn-group pull-right" role="group" aria-label="...">

                    <!--<button type="button" onclick="GetVMCData()" class="btn btn-default btn-success"><span class="fa fa-shopping-cart"></span>&nbsp;Checkout</button>-->
                    <div id="ob-virtualmarketingcart">

                        <input id="ob-virtualmarketingcart-sku" type="hidden" value="{{product.sku}}">
                        <input id="ob-virtualmarketingcart-supplier" type="hidden" value="5">
                        <input id="ob-virtualmarketingcart-reference-id" type="hidden" value="ob_prod">
                        <input id="ob-virtualmarketingcart-culture" type="hidden" value="en_us">
                        <input type="button" class="ob-btvirtualloadcontent" style="display:none;" />

                    </div>

                </div>

            </div>
        </div>
    </script>

    <script id="productDescription" type="text/x-handlebars-template">
        <div class="tab-pane fade " id="service-two">
            <section class="container product-info">
                <p></p>
                {{{product.description}}}
            </section>
        </div>
    </script>

    <script id="productDetail" type="text/x-handlebars-template">
        <div class="tab-pane fade in active" id="service-one">
            <section class="">
                <div class="table-responsive">
                    <p></p>
                    <div class="clearfix"></div>
                    <table class="table table-bordered specification">
                        <tbody>
                            <tr>
                                <td>Category :</td>
                                <td>
                                    {{#each product.categories}} {{this}}, {{/each}}
                                </td>
                            </tr>
                            <tr>
                                <td> Colours :</td>
                                <td>
                                    <table class="table table-bordered">
                                        <tr>
                                            {{#each product.attributes.Colors}}
                                            <td class="text-center">{{this}}</td>
                                            {{/each}}
                                        </tr>
                                        <tr>
                                            {{#each product.attributes.Colors}}a
                                            <td class="text-center">
                                                <center>
                                                    <div style="background:{{this}};height:24px;width:24px;"></div>
                                                </center>
                                            </td>
                                            {{/each}}
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <!--<tr>
                                <td colspan="2" class="title">
                                    SHIPPING DETAILS
                                </td>
                            </tr>
                            <tr>
                                <td>Carton Weight :</td>
                                <td>{{product.shipping_information.carton.weight.param}}</td>
                            </tr>
                            <tr>
                                <td>Qty per carton :</td>
                                <td>{{product.shipping_information.quantity_in_carton}}</td>
                            </tr>
                            <tr>
                                <td>FOB : </td>
                                <td>{{product.shipping_information.free_on_board}}</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="title">
                                    IMPRINT METHOD
                                </td>
                            </tr>
                            <tr>
                                <td>Imprint Method :</td>
                                <td>{{#each product.imprint_methods}} {{this}} {{/each}}</td>
                            </tr>
                            <tr>
                                <td>Production Time :</td>
                                <td>{{product.imprint_information.4.production_days}} {{product.imprint_information.4.production_unit}}</td>
                            </tr>
                            <tr>
                                <td>Imprint Colour :</td>
                                <td>
                                    <div style="margin-top: -11px;">{{#each product.imprint_information.4.imprint_color}}
                                        <h5><span class="label label-info pull-left" style="margin: 2px;">{{this}} </span>
                                        </h5>
                                        {{/each}}
                                    </div>
                                </td>
                            </tr>-->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </script>

    <script id="productFeatures" type="text/x-handlebars-template">
        <div class="tab-pane fade" id="service-three">
            <section class="">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <tbody>
                            <p></p>
                            {{#each product.feature_details}}
                            <tr>
                                <td>{{label}}</td>
                                <td>{{value}}</td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>

                </div>
            </section>
        </div>
    </script>

    <script id="404NotFound" type="text/x-handlebars-template">
        <div class="container">
            <div class="row">
                <div class="span12">
                    <div class="hero-unit center">
                        <h1>Page Not Found <small><font face="Tahoma" color="red">Error 404</font></small></h1>
                        <br />
                        <p>The page you requested could not be found, either contact your webmaster or try again. Use your browsers <b>Back</b> button to navigate to the page you have prevously come from</p>
                    </div>
                </div>
            </div>
        </div>

    </script>

    <script id="checkoutpage" type="text/x-handlebars-template">
        <nav class="">
            <div class="col-md-3">
                <a href="#!" class="brand-logo">closeout promo</a>
            </div>
            <div class="col-md-9">
                <CategorySearch componentId="SearchSensor" appbaseField="title" categoryField="brand.raw" placeholder="Search" autocomplete={false} />
            </div>
        </nav>
        <div class="container">
            <div class="row">
                <div class="col-md-12" style="margin-top:20px;margin-bottom:20px;">
                    <div class="btn-group pull-right" role="group" aria-label="..." style="margin-top:-20px;">
                        <button type="button" onclick="gotoProduct()" class="btn btn-default btn-info"><span class="fa fa-arrow-left"></span>&nbsp;Back to Products</button>
                        <button type="button" onclick="CreateRFQRequest()" class="btn btn-default btn-success"><span class="fa fa-shopping-cart"></span>&nbsp;Checkout</button>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="invoice-title">
                        <h3>SKU: {{sku}}</h3>
                        <hr>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <strong>Product Name:</strong> {{product_name}}
                        </div>
                        <div class="col-xs-6 text-right">

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6 form-inline">
                            <strong>Product Qty:</strong> <input type="number" name="txtQty" id="txtQty" text="1" class="form-control" style="margin-bottom: 5px;">
                        </div>
                    </div>

                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title"><strong>Order Detail</strong></h3>
                        </div>
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table table-condensed">
                                    <thead>
                                        <tr>
                                            <td><strong>Imprint Colors</strong></td>
                                            <td><strong>Color Selection</strong></td>
                                            <td><strong>Imprint Method</strong></td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {{#each vmcData.sides}}
                                        <tr>
                                            <td>
                                                <strong>{{sideName}}</strong>
                                            </td>
                                            <td>
                                                {{colorSelection}}
                                            </td>
                                            <td>
                                                {{imprintMethod}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td>
                                                <strong>Image</strong>
                                            </td>
                                            <td class="col-md-3">
                                                <strong>Color</strong>
                                            </td>
                                        </tr>
                                        {{#each this.productColor}}
                                        <tr>
                                            <td></td>
                                            <td>
                                                <div class="media">
                                                    <a class="thumbnail pull-left" href="#"> <img class="media-object" src="{{image}}" style="width: 72px; height: 72px;"> </a>
                                                </div>
                                            </td>
                                            <td class="col-md-3">
                                                {{colorName}}
                                            </td>
                                        </tr>
                                        {{/each}} {{/each}}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </script>



    <script id="bidTemplate" type="text/x-handlebars-template">
        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Add to Auction</h4>
                    </div>
                    <div class="modal-body">
                        <form id="bidForm">
                            <div class="form-group">
                                <label for="n3DsDTreR9fWStKGf" class="control-label">Bid Title</label>
                                <input type="text" name="title" value="{{product.product_name}}" id="n3DsDTreR9fWStKGf" data-schema-key="title" maxlength="60" class="form-control" required >
                                <input type="hidden" name="product_sku" value="{{product.sku}}" id="n3DsDTreR9fWStKGf" data-schema-key="title" maxlength="60" class="form-control">
                                <input type="hidden" name="owner" value="{{product.supplier_info.owanerId}}" id="n3DsDTreR9fWStKGf" data-schema-key="title" maxlength="60" class="form-control">
                                <span class="help-block"></span>
                            </div>
                            <!-- <div class="form-group has-error" data-required="true">
                <label for="9CkcrBjRi4Sh82WGD" class="control-label">Description</label>
                <textarea rows="5" name="content" id="9CkcrBjRi4Sh82WGD" required="" data-schema-key="content" class="form-control">
                </textarea>
                <span class="help-block">Description is required</span>
              </div> -->
                            <!-- <div class="form-group">
                <label for="g85ymHa7WFt957HT4" class="control-label">Choose a Currency</label>
                <select name="currency" id="g85ymHa7WFt957HT4" data-schema-key="currency" autocomplete="off" class="form-control">
                <option value="">(Select One)</option>
                <option value="$">USD ($)</option>
                <option value="€">EUR (€)</option>
                <option value="¥">JPY (¥)</option>
                <option value="$">AUD ($)</option>
                <option value="$">CAD ($)</option>
                <option value="Fr">CHF (Fr) </option>
                <option value="₹">INR (₹)</option>
                <option value="₽">RUB (₽)</option>
              </select>
                <span class="help-block"></span>
              </div> -->
                <div class="form-group" data-required="true">
                <label for="4iAWxio2XnC5PBtBm" class="control-label">Initial Bid Price</label>
                <input type="number" value="{{product.price}}" name="StartingBid" id="4iAWxio2XnC5PBtBm" data-schema-key="StartingBid" class="form-control">
                <!-- <span class="help-block">Initial Bid Price is required</span> -->
              </div>
                <div class="form-group">
                <label for="BngoNBbNDcc6Dm7r5" class="control-label">Ceiling Bid Price (optional)</label>
                <input type="number" name="UpperLimitBid" id="BngoNBbNDcc6Dm7r5" data-schema-key="UpperLimitBid" class="form-control">
                <span class="help-block"></span>
              </div>
                <div class="form-group" data-required="true">
                <label for="4tks3LsNtEEEtRGMk" class="control-label">Increment Bids by</label>
                <input type="number" name="BidIncrementedBy" id="4tks3LsNtEEEtRGMk"  data-schema-key="BidIncrementedBy" class="form-control">
                <!-- <span class="help-block">Increment Bids by is required</span> -->
              </div>
                <div class="form-group" data-required="true">
                <label for="ha59AgiYAFQx3hAjs" class="control-label">Bid Ends on</label>
                <div class="row">
                <div class="col-md-6">
                <input type="date" name="EndBidDate" id="ha59AgiYAFQx3hAjs" data-schema-key="EndBidDate" class="form-control">
                </div>
                <div class="col-md-6">
                <input type="time" name="EndBidTime" id="endBidTime" data-schema-key="EndBidTime" class="form-control">
                </div>
                </div>
                <!-- <span class="help-block">Bid Ends on is required</span> -->
              </div>


              <div class="form-group" data-required="true">
                  <label for="LfFWTPmjgE4Jmpfo9" class="control-label">End of Auction Method</label>
                  <select name="endOfAuctionMethod" id="LfFWTPmjgE4Jmpfo9" data-schema-key="endOfAuctionMethod" autocomplete="off" class="form-control">
                    <option value="">(Select One)</option>
                    <option value="1">Auto Assign to the top bidder</option>
                    <option value="2" selected="selected">Receive email/notification at the End of bidding</option>
                  </select>
                  <!-- <span class="help-block">End of Auction Method is required</span> -->
              </div>
                              <!-- <div class="form-group has-error" data-required="true">
                                <span class="help-block">End of AuctBngoNBbNDcc6Dm7r5ion Method is required</span>
                            </div>
                            <!-- <div class="form-group has-error" data-required="true">
                <label for="muT6AmroRFYcEHkzT" class="control-label">Image (optional)</label>
                <div>
                <button type="button" class="btn btn-default af-select-file js-af-select-file">
                Choose file
                <input type="file" class="js-file">
              </button>
                <input type="hidden" class="js-value" data-schema-key="picture">
              </div>
                <span class="help-block">Image (optional) is required</span>
              </div> -->
                            <!-- <input type="button" id='savetoRethink' class="btn btn-primary" value="Submit form"> -->
                            <!-- <button type="button" id="savetoRethink"  class="btn btn-primary">Add Bid</button> -->
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-defaulBngoNBbNDcc6Dm7r5t" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="myButton" onclick='uploadForm();'>Save changes</button>
                    </div>
                </div>
            </div>
        </div>

        
    </script>
    <script src="Index.js"></script>
</body>

<script>
    function uploadForm() {
        //savetoRethink
        postURL = window.location.origin + "/api/save/"
        frmdata = $("#bidForm").serialize();
        //console.log(frmdata)

        
        // Validations for bid form
        var bidTitle = $('#n3DsDTreR9fWStKGf');
        var initialBid = $('#4iAWxio2XnC5PBtBm');
        var ceilingBid = $('#BngoNBbNDcc6Dm7r5');
        var incrementBid = $('#4tks3LsNtEEEtRGMk');
        var endBidDate = $('#ha59AgiYAFQx3hAjs');
        var endBidTime = $('#endBidTime');
        var myEndBidDate = new Date(endBidDate.val()) ;
        myEndBidDate.setHours(0,0,0,0);
        var today = new Date();
        today.setHours(0, 0, 0, 0);

        if(!bidTitle.val()) {
        $('#n3DsDTreR9fWStKGf').css("border-color", "red");
        e.preventDefault();
        }
        else{
            $('#n3DsDTreR9fWStKGf').css("border-color", "blue");
        }
   
        if( (!initialBid.val()) || (initialBid.val()<0)) {
        $('#4iAWxio2XnC5PBtBm').css("border-color", "red");
        e.preventDefault();
        }
        else{
            $('#4iAWxio2XnC5PBtBm').css("border-color", "blue");
        }   

        if(ceilingBid.val()<0) {
        $('#BngoNBbNDcc6Dm7r5').css("border-color", "red");
        e.preventDefault();
        }
        else{
            $('#BngoNBbNDcc6Dm7r5').css("border-color", "blue");
        }
        
        if((!incrementBid.val()) || (incrementBid.val()<0)) {
        $('#4tks3LsNtEEEtRGMk').css("border-color", "red");
        e.preventDefault();
        }
        else{
            $('#4tks3LsNtEEEtRGMk').css("border-color", "blue");
        }
        
        if((!endBidDate.val()) || (myEndBidDate<today)) {
        $('#ha59AgiYAFQx3hAjs').css("border-color", "red");
        e.preventDefault();
        }
        else{
            $('#ha59AgiYAFQx3hAjs').css("border-color", "blue");
        }

        if(!endBidTime.val()) {
        $('#endBidTime').css("border-color", "red");
        e.preventDefault();
        }
        else{
            $('#endBidTime').css("border-color", "blue");
        }



        $.ajax({
            url: postURL,
            type: 'POST',
            data: frmdata,
            success: function(data, textStatus, xhr) {
                //alert(data)
                $("#myModal").modal('hide')
                $.notify("Bid generated successfully !!!", "success");
            },
            error: function(xhr, textStatus, errorThrown) {
                $("#myModal").hide()
                    //alert("======12=====");
                    //alert(textStatus);
                    //display404Page();
                    //console.log(errorThrown);
            },
        });
    }

    
</script>

<script type="text/javascript">

</script>
